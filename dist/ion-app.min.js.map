{"version":3,"sources":["webpack:///ion-app.min.js","webpack:///./ion-app.js","webpack:///../xin/components/app.js"],"names":["webpackJsonp","0","module","exports","__webpack_require__","_interopRequireDefault","obj","__esModule","default","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","prototype","Object","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","defineProperty","_createClass","defineProperties","target","props","i","length","descriptor","key","protoProps","staticProps","_get","get","object","property","receiver","Function","desc","getOwnPropertyDescriptor","undefined","parent","getPrototypeOf","getter","_xin","_xin2","_app","_app2","IonApp","_App","this","apply","arguments","classList","add","platformMode","platform","window","history","back","type","String","computed","backbutton","define","20","_asyncToGenerator","fn","gen","Promise","resolve","reject","step","arg","info","error","done","then","err","compose","middlewares","_this3","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","next","_ref3","regeneratorRuntime","mark","_callee4","context","index","dispatch","_ref4","_callee3","wrap","_context3","prev","Error","abrupt","sent","stop","_x3","_context4","_x","_x2","xin","App","_xin$Component","evt","console","detail","title","document","put","__appSignature","location","handlers","__started","hashSeparator","reHashSeparator","RegExp","manual","async","start","pattern","match","str","chunks","split","tokens","re","replace","g","token","push","optRe","slice","route","callback","routeHandler","args","__isStatic","result","__routeRegExp","_ref","_callee","executed","_context","__middlewareChainRun","__execute","__getId","__listenNavigation","fire","_this2","__executeCallback","mode","addEventListener","defaultPrevented","nodeName","preventDefault","state","url","getAttribute","pushState","innerHTML","href","bind","fragment","getFragment","reduce","executors","handler","forEach","name","_ref2","_callee2","_context2","getFragmentExecutors","uri","executor","path","options","rootUri","toString","origin","middleware","decodeURI","pathname","search","docTitle","observer","Boolean","route-not-found","Component"],"mappings":"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","file":"ion-app.min.js","sourcesContent":["webpackJsonp([0],{\n\n/***/ 0:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\t\n\tvar _xin = __webpack_require__(1);\n\t\n\tvar _xin2 = _interopRequireDefault(_xin);\n\t\n\tvar _app = __webpack_require__(20);\n\t\n\tvar _app2 = _interopRequireDefault(_app);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar IonApp = function (_App) {\n\t  _inherits(IonApp, _App);\n\t\n\t  function IonApp() {\n\t    _classCallCheck(this, IonApp);\n\t\n\t    return _possibleConstructorReturn(this, (IonApp.__proto__ || Object.getPrototypeOf(IonApp)).apply(this, arguments));\n\t  }\n\t\n\t  _createClass(IonApp, [{\n\t    key: 'ready',\n\t    value: function ready() {\n\t      this.classList.add(this.platformMode);\n\t    }\n\t  }, {\n\t    key: '_computePlatformMode',\n\t    value: function _computePlatformMode(platform) {\n\t      return platform === 'android' ? 'md' : platform;\n\t    }\n\t  }, {\n\t    key: '_backButtonTapped',\n\t    value: function _backButtonTapped() {\n\t      window.history.back();\n\t    }\n\t  }, {\n\t    key: 'props',\n\t    get: function get() {\n\t      var props = _get(IonApp.prototype.__proto__ || Object.getPrototypeOf(IonApp.prototype), 'props', this);\n\t\n\t      props.platform = {\n\t        type: String,\n\t        value: 'android'\n\t      };\n\t\n\t      props.platformMode = {\n\t        type: String,\n\t        computed: '_computePlatformMode(platform)'\n\t      };\n\t\n\t      return props;\n\t    }\n\t  }, {\n\t    key: 'listeners',\n\t    get: function get() {\n\t      return {\n\t        'backbutton': '_backButtonTapped'\n\t      };\n\t    }\n\t  }]);\n\t\n\t  return IonApp;\n\t}(_app2.default);\n\t\n\t_xin2.default.define('ion-app', IonApp);\n\t\n\texports.default = IonApp;\n\n/***/ },\n\n/***/ 20:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step(\"next\", value); }, function (err) { step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar xin = __webpack_require__(1);\n\t\n\tvar App = function (_xin$Component) {\n\t  _inherits(App, _xin$Component);\n\t\n\t  function App() {\n\t    _classCallCheck(this, App);\n\t\n\t    return _possibleConstructorReturn(this, (App.__proto__ || Object.getPrototypeOf(App)).apply(this, arguments));\n\t  }\n\t\n\t  _createClass(App, [{\n\t    key: 'handleRouteNotFound',\n\t    value: function handleRouteNotFound(evt) {\n\t      console.error('Route not found: ' + evt.detail);\n\t    }\n\t  }, {\n\t    key: '_titleChanged',\n\t    value: function _titleChanged(title) {\n\t      document.title = title;\n\t    }\n\t  }, {\n\t    key: 'created',\n\t    value: function created() {\n\t      xin.put('app', this);\n\t\n\t      // this.classList.add('xin-app');\n\t\n\t      this.__appSignature = true;\n\t      this.location = window.location;\n\t      this.history = window.history;\n\t\n\t      // default values\n\t      this.handlers = [];\n\t      this.middlewares = [];\n\t\n\t      this.__started = false;\n\t    }\n\t  }, {\n\t    key: '_hashSeparatorChanged',\n\t    value: function _hashSeparatorChanged(hashSeparator) {\n\t      this.reHashSeparator = new RegExp(hashSeparator + '(.*)$');\n\t    }\n\t  }, {\n\t    key: 'attached',\n\t    value: function attached() {\n\t      if (!this.manual) {\n\t        this.async(this.start);\n\t      }\n\t    }\n\t  }, {\n\t    key: '__isStatic',\n\t    value: function __isStatic(pattern) {\n\t      return !pattern.match(/[[{]/);\n\t    }\n\t  }, {\n\t    key: '__routeRegExp',\n\t    value: function __routeRegExp(str) {\n\t      var chunks = str.split('[');\n\t\n\t      if (chunks.length > 2) {\n\t        throw new Error('Invalid use of optional params');\n\t      }\n\t\n\t      var tokens = [];\n\t      var re = chunks[0].replace(/{([^}]+)}/g, function (g, token) {\n\t        tokens.push(token);\n\t        return '([^/]+)';\n\t      }).replace(/\\//g, '\\\\/');\n\t\n\t      var optRe = '';\n\t\n\t      if (chunks[1]) {\n\t        optRe = '(?:' + chunks[1].slice(0, -1).replace(/{([^}]+)}/g, function (g, token) {\n\t          tokens.push(token);\n\t          return '([^/]+)';\n\t        }).replace(/\\//g, '\\\\/') + ')?';\n\t      }\n\t      return [new RegExp('^' + re + optRe + '$'), tokens];\n\t    }\n\t  }, {\n\t    key: 'route',\n\t    value: function route(_route, callback) {\n\t      var routeHandler = {\n\t        route: _route,\n\t        type: 's',\n\t        pattern: null,\n\t        args: [],\n\t        callback: callback\n\t      };\n\t\n\t      if (!this.__isStatic(_route)) {\n\t        var result = this.__routeRegExp(_route);\n\t\n\t        routeHandler.type = 'v';\n\t        routeHandler.pattern = result[0];\n\t        routeHandler.args = result[1];\n\t      }\n\t\n\t      this.handlers.push(routeHandler);\n\t    }\n\t  }, {\n\t    key: 'start',\n\t    value: function () {\n\t      var _ref = _asyncToGenerator(regeneratorRuntime.mark(function _callee() {\n\t        var executed;\n\t        return regeneratorRuntime.wrap(function _callee$(_context) {\n\t          while (1) {\n\t            switch (_context.prev = _context.next) {\n\t              case 0:\n\t                if (!this.__started) {\n\t                  _context.next = 2;\n\t                  break;\n\t                }\n\t\n\t                return _context.abrupt('return');\n\t\n\t              case 2:\n\t\n\t                this.__middlewareChainRun = compose(this.middlewares);\n\t\n\t                // this.__starting = true;\n\t                _context.next = 5;\n\t                return this.__execute();\n\t\n\t              case 5:\n\t                executed = _context.sent;\n\t\n\t                // this.__starting = false;\n\t\n\t                if (executed) {\n\t                  console.info('Started    ' + this.__getId());\n\t\n\t                  this.__started = true;\n\t\n\t                  this.__listenNavigation();\n\t\n\t                  this.fire('started');\n\t                }\n\t\n\t              case 7:\n\t              case 'end':\n\t                return _context.stop();\n\t            }\n\t          }\n\t        }, _callee, this);\n\t      }));\n\t\n\t      function start() {\n\t        return _ref.apply(this, arguments);\n\t      }\n\t\n\t      return start;\n\t    }()\n\t  }, {\n\t    key: '__listenNavigation',\n\t    value: function __listenNavigation() {\n\t      var _this2 = this;\n\t\n\t      var callback = this.__executeCallback = function () {\n\t        _this2.__execute();\n\t      };\n\t\n\t      if (this.mode === 'history') {\n\t        window.addEventListener('popstate', callback, false);\n\t        document.addEventListener('click', function (evt) {\n\t          if (!evt.defaultPrevented && evt.target.nodeName === 'A' && evt.target.target === '') {\n\t            evt.preventDefault();\n\t\n\t            var state = { url: evt.target.getAttribute('href') };\n\t            this.history.pushState(state, evt.target.innerHTML, evt.target.href);\n\t\n\t            callback();\n\t          }\n\t        }.bind(this));\n\t      } else {\n\t        window.addEventListener('hashchange', callback, false);\n\t      }\n\t    }\n\t  }, {\n\t    key: 'getFragmentExecutors',\n\t    value: function getFragmentExecutors(fragment) {\n\t      fragment = fragment || this.getFragment();\n\t\n\t      return this.handlers.reduce(function (executors, handler) {\n\t        if (handler.type === 's') {\n\t          if (fragment === handler.route) {\n\t            executors.push({ handler: handler, args: {} });\n\t          }\n\t        } else if (handler.type === 'v') {\n\t          (function () {\n\t            var result = fragment.match(handler.pattern);\n\t            if (result) {\n\t              (function () {\n\t                var args = {};\n\t\n\t                handler.args.forEach(function (name, index) {\n\t                  args[name] = result[index + 1];\n\t                });\n\t\n\t                executors.push({\n\t                  handler: handler,\n\t                  args: args\n\t                });\n\t              })();\n\t            }\n\t          })();\n\t        }\n\t        return executors;\n\t      }, []);\n\t    }\n\t  }, {\n\t    key: '__execute',\n\t    value: function () {\n\t      var _ref2 = _asyncToGenerator(regeneratorRuntime.mark(function _callee2() {\n\t        var fragment, executors, context;\n\t        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n\t          while (1) {\n\t            switch (_context2.prev = _context2.next) {\n\t              case 0:\n\t                fragment = this.getFragment();\n\t                executors = this.getFragmentExecutors(fragment);\n\t\n\t                if (!(executors.length === 0)) {\n\t                  _context2.next = 5;\n\t                  break;\n\t                }\n\t\n\t                this.fire('route-not-found', fragment);\n\t                return _context2.abrupt('return', false);\n\t\n\t              case 5:\n\t                context = { uri: fragment };\n\t\n\t\n\t                this.fire('navigated', context);\n\t\n\t                // run middleware chain then execute all executors\n\t                _context2.next = 9;\n\t                return this.__middlewareChainRun(context, function () {\n\t                  executors.forEach(function (executor) {\n\t                    return executor.handler.callback(executor.args, context);\n\t                  });\n\t                });\n\t\n\t              case 9:\n\t                return _context2.abrupt('return', true);\n\t\n\t              case 10:\n\t              case 'end':\n\t                return _context2.stop();\n\t            }\n\t          }\n\t        }, _callee2, this);\n\t      }));\n\t\n\t      function __execute() {\n\t        return _ref2.apply(this, arguments);\n\t      }\n\t\n\t      return __execute;\n\t    }()\n\t  }, {\n\t    key: 'navigate',\n\t    value: function navigate(path, options) {\n\t      path = path || '/';\n\t      options = options || {};\n\t\n\t      if (this.mode === 'history') {\n\t        var url = this.rootUri + path.toString().replace(/\\/$/, '').replace(/^\\//, '');\n\t        if (this.location.href.replace(this.location.origin, '') !== url) {\n\t          this.history[options.replace ? 'replaceState' : 'pushState']({}, document.title, url);\n\t          this.__execute();\n\t        }\n\t      } else {\n\t        this.location.href.match(this.reHashSeparator);\n\t        this.location.href = this.location.href.replace(this.reHashSeparator, '') + this.hashSeparator + path;\n\t      }\n\t      return this;\n\t    }\n\t  }, {\n\t    key: 'use',\n\t    value: function use(middleware) {\n\t      this.middlewares.push(middleware);\n\t    }\n\t  }, {\n\t    key: 'getFragment',\n\t    value: function getFragment() {\n\t      var fragment = void 0;\n\t      if (this.mode === 'history') {\n\t        fragment = decodeURI(this.location.pathname + this.location.search);\n\t        fragment = fragment.replace(/\\?(.*)$/, '');\n\t        fragment = this.rootUri === '/' ? fragment : fragment.replace(this.rootUri, '');\n\t      } else {\n\t        var match = this.location.href.match(this.reHashSeparator);\n\t        fragment = match ? match[1] : '';\n\t      }\n\t\n\t      return '/' + fragment.toString().replace(/\\/$/, '').replace(/^\\//, '');\n\t    }\n\t\n\t    // $back (evt) {\n\t    //   evt.preventDefault();\n\t    //   this.history.back();\n\t    // }\n\t\n\t  }, {\n\t    key: 'props',\n\t    get: function get() {\n\t      return {\n\t        docTitle: {\n\t          type: String,\n\t          value: 'Application',\n\t          observer: '_titleChanged'\n\t        },\n\t\n\t        manual: {\n\t          type: Boolean\n\t        },\n\t\n\t        mode: {\n\t          type: String,\n\t          value: 'hash'\n\t        },\n\t\n\t        rootUri: {\n\t          type: String,\n\t          value: '/'\n\t        },\n\t\n\t        hashSeparator: {\n\t          type: String,\n\t          value: '#!',\n\t          observer: '_hashSeparatorChanged'\n\t        }\n\t      };\n\t    }\n\t  }, {\n\t    key: 'listeners',\n\t    get: function get() {\n\t      return {\n\t        'route-not-found': 'handleRouteNotFound(evt)'\n\t      };\n\t    }\n\t  }, {\n\t    key: 'started',\n\t    get: function get() {\n\t      return this.__started || false;\n\t    }\n\t  }]);\n\t\n\t  return App;\n\t}(xin.Component);\n\t\n\txin.define('xin-app', App);\n\t\n\tfunction compose(middlewares) {\n\t  var _this3 = this;\n\t\n\t  var _iteratorNormalCompletion = true;\n\t  var _didIteratorError = false;\n\t  var _iteratorError = undefined;\n\t\n\t  try {\n\t    for (var _iterator = middlewares[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n\t      var fn = _step.value;\n\t\n\t      if (typeof fn !== 'function') {\n\t        throw new TypeError('Middleware must be composed of functions!');\n\t      }\n\t    }\n\t  } catch (err) {\n\t    _didIteratorError = true;\n\t    _iteratorError = err;\n\t  } finally {\n\t    try {\n\t      if (!_iteratorNormalCompletion && _iterator.return) {\n\t        _iterator.return();\n\t      }\n\t    } finally {\n\t      if (_didIteratorError) {\n\t        throw _iteratorError;\n\t      }\n\t    }\n\t  }\n\t\n\t  return function () {\n\t    var _ref3 = _asyncToGenerator(regeneratorRuntime.mark(function _callee4(context, next) {\n\t      var dispatch = function () {\n\t        var _ref4 = _asyncToGenerator(regeneratorRuntime.mark(function _callee3(i) {\n\t          var fn;\n\t          return regeneratorRuntime.wrap(function _callee3$(_context3) {\n\t            while (1) {\n\t              switch (_context3.prev = _context3.next) {\n\t                case 0:\n\t                  if (!(i <= index)) {\n\t                    _context3.next = 2;\n\t                    break;\n\t                  }\n\t\n\t                  throw new Error('next() called multiple times');\n\t\n\t                case 2:\n\t\n\t                  index = i;\n\t                  fn = middlewares[i];\n\t\n\t                  if (i === middlewares.length) {\n\t                    fn = next;\n\t                  }\n\t\n\t                  if (fn) {\n\t                    _context3.next = 7;\n\t                    break;\n\t                  }\n\t\n\t                  return _context3.abrupt('return');\n\t\n\t                case 7:\n\t                  _context3.next = 9;\n\t                  return fn(context, function () {\n\t                    return dispatch(i + 1);\n\t                  });\n\t\n\t                case 9:\n\t                  return _context3.abrupt('return', _context3.sent);\n\t\n\t                case 10:\n\t                case 'end':\n\t                  return _context3.stop();\n\t              }\n\t            }\n\t          }, _callee3, this);\n\t        }));\n\t\n\t        return function dispatch(_x3) {\n\t          return _ref4.apply(this, arguments);\n\t        };\n\t      }();\n\t\n\t      var index;\n\t      return regeneratorRuntime.wrap(function _callee4$(_context4) {\n\t        while (1) {\n\t          switch (_context4.prev = _context4.next) {\n\t            case 0:\n\t              // last called middlewares #\n\t              index = -1;\n\t              return _context4.abrupt('return', dispatch(0));\n\t\n\t            case 2:\n\t            case 'end':\n\t              return _context4.stop();\n\t          }\n\t        }\n\t      }, _callee4, _this3);\n\t    }));\n\t\n\t    return function (_x, _x2) {\n\t      return _ref3.apply(this, arguments);\n\t    };\n\t  }();\n\t}\n\t\n\txin.App = App;\n\t\n\tmodule.exports = App;\n\n/***/ }\n\n});\n\n\n/** WEBPACK FOOTER **\n ** ion-app.min.js\n **/","import xin from 'xin';\nimport App from 'xin/components/app';\n\nclass IonApp extends App {\n  get props () {\n    let props = super.props;\n\n    props.platform = {\n      type: String,\n      value: 'android',\n    };\n\n    props.platformMode = {\n      type: String,\n      computed: '_computePlatformMode(platform)',\n    };\n\n    return props;\n  }\n\n  get listeners () {\n    return {\n      'backbutton': '_backButtonTapped',\n    };\n  }\n\n  ready () {\n    this.classList.add(this.platformMode);\n  }\n\n  _computePlatformMode (platform) {\n    return platform === 'android' ? 'md' : platform;\n  }\n\n  _backButtonTapped () {\n    window.history.back();\n  }\n}\n\nxin.define('ion-app', IonApp);\n\nexport default IonApp;\n\n\n\n/** WEBPACK FOOTER **\n ** ./ion-app.js\n **/","const xin = require('../src');\n\nclass App extends xin.Component {\n  get props () {\n    return {\n      docTitle: {\n        type: String,\n        value: 'Application',\n        observer: '_titleChanged',\n      },\n\n      manual: {\n        type: Boolean,\n      },\n\n      mode: {\n        type: String,\n        value: 'hash',\n      },\n\n      rootUri: {\n        type: String,\n        value: '/',\n      },\n\n      hashSeparator: {\n        type: String,\n        value: '#!',\n        observer: '_hashSeparatorChanged',\n      },\n    };\n  }\n\n  get listeners () {\n    return {\n      'route-not-found': 'handleRouteNotFound(evt)',\n    };\n  }\n\n  handleRouteNotFound (evt) {\n    console.error('Route not found: ' + evt.detail);\n  }\n\n  _titleChanged (title) {\n    document.title = title;\n  }\n\n  created () {\n    xin.put('app', this);\n\n    // this.classList.add('xin-app');\n\n    this.__appSignature = true;\n    this.location = window.location;\n    this.history = window.history;\n\n    // default values\n    this.handlers = [];\n    this.middlewares = [];\n\n    this.__started = false;\n  }\n\n  _hashSeparatorChanged (hashSeparator) {\n    this.reHashSeparator = new RegExp(hashSeparator + '(.*)$');\n  }\n\n  attached () {\n    if (!this.manual) {\n      this.async(this.start);\n    }\n  }\n\n  __isStatic (pattern) {\n    return !pattern.match(/[[{]/);\n  }\n\n  __routeRegExp (str) {\n    let chunks = str.split('[');\n\n    if (chunks.length > 2) {\n      throw new Error('Invalid use of optional params');\n    }\n\n    let tokens = [];\n    let re = chunks[0].replace(/{([^}]+)}/g, function (g, token) {\n      tokens.push(token);\n      return '([^/]+)';\n    }).replace(/\\//g, '\\\\/');\n\n    let optRe = '';\n\n    if (chunks[1]) {\n      optRe = '(?:' + chunks[1].slice(0, -1).replace(/{([^}]+)}/g, function (g, token) {\n        tokens.push(token);\n        return '([^/]+)';\n      }).replace(/\\//g, '\\\\/') + ')?';\n    }\n    return [ new RegExp('^' + re + optRe + '$'), tokens ];\n  }\n\n  route (route, callback) {\n    let routeHandler = {\n      route: route,\n      type: 's',\n      pattern: null,\n      args: [],\n      callback: callback,\n    };\n\n    if (!this.__isStatic(route)) {\n      let result = this.__routeRegExp(route);\n\n      routeHandler.type = 'v';\n      routeHandler.pattern = result[0];\n      routeHandler.args = result[1];\n    }\n\n    this.handlers.push(routeHandler);\n  }\n\n  async start () {\n    if (this.__started) {\n      return;\n    }\n\n    this.__middlewareChainRun = compose(this.middlewares);\n\n    // this.__starting = true;\n    let executed = await this.__execute();\n    // this.__starting = false;\n\n    if (executed) {\n      console.info(`Started    ${this.__getId()}`);\n\n      this.__started = true;\n\n      this.__listenNavigation();\n\n      this.fire('started');\n    }\n  }\n\n  __listenNavigation () {\n    let callback = this.__executeCallback = () => {\n      this.__execute();\n    };\n\n    if (this.mode === 'history') {\n      window.addEventListener('popstate', callback, false);\n      document.addEventListener('click', function (evt) {\n        if (!evt.defaultPrevented && evt.target.nodeName === 'A' && evt.target.target === '') {\n          evt.preventDefault();\n\n          let state = { url: evt.target.getAttribute('href') };\n          this.history.pushState(state, evt.target.innerHTML, evt.target.href);\n\n          callback();\n        }\n      }.bind(this));\n    } else {\n      window.addEventListener('hashchange', callback, false);\n    }\n  }\n\n  get started () {\n    return this.__started || false;\n  }\n\n  getFragmentExecutors (fragment) {\n    fragment = fragment || this.getFragment();\n\n    return this.handlers.reduce((executors, handler) => {\n      if (handler.type === 's') {\n        if (fragment === handler.route) {\n          executors.push({ handler: handler, args: {} });\n        }\n      } else if (handler.type === 'v') {\n        let result = fragment.match(handler.pattern);\n        if (result) {\n          let args = {};\n\n          handler.args.forEach(function (name, index) {\n            args[name] = result[index + 1];\n          });\n\n          executors.push({\n            handler: handler,\n            args: args,\n          });\n        }\n      }\n      return executors;\n    }, []);\n  }\n\n  async __execute () {\n    let fragment = this.getFragment();\n\n    let executors = this.getFragmentExecutors(fragment);\n    if (executors.length === 0) {\n      this.fire('route-not-found', fragment);\n      return false;\n    }\n\n    let context = { uri: fragment };\n\n    this.fire('navigated', context);\n\n    // run middleware chain then execute all executors\n    await this.__middlewareChainRun(context, () => {\n      executors.forEach(executor => executor.handler.callback(executor.args, context));\n    });\n\n    return true;\n  }\n\n  navigate (path, options) {\n    path = path || '/';\n    options = options || {};\n\n    if (this.mode === 'history') {\n      let url = this.rootUri + path.toString().replace(/\\/$/, '').replace(/^\\//, '');\n      if (this.location.href.replace(this.location.origin, '') !== url) {\n        this.history[options.replace ? 'replaceState' : 'pushState']({}, document.title, url);\n        this.__execute();\n      }\n    } else {\n      this.location.href.match(this.reHashSeparator);\n      this.location.href = this.location.href.replace(this.reHashSeparator, '') + this.hashSeparator + path;\n    }\n    return this;\n  }\n\n  use (middleware) {\n    this.middlewares.push(middleware);\n  }\n\n  getFragment () {\n    let fragment;\n    if (this.mode === 'history') {\n      fragment = decodeURI(this.location.pathname + this.location.search);\n      fragment = fragment.replace(/\\?(.*)$/, '');\n      fragment = this.rootUri === '/' ? fragment : fragment.replace(this.rootUri, '');\n    } else {\n      let match = this.location.href.match(this.reHashSeparator);\n      fragment = match ? match[1] : '';\n    }\n\n    return '/' + fragment.toString().replace(/\\/$/, '').replace(/^\\//, '');\n  }\n\n  // $back (evt) {\n  //   evt.preventDefault();\n  //   this.history.back();\n  // }\n}\n\nxin.define('xin-app', App);\n\nfunction compose (middlewares) {\n  for (const fn of middlewares) {\n    if (typeof fn !== 'function') {\n      throw new TypeError('Middleware must be composed of functions!');\n    }\n  }\n\n  return async (context, next) => {\n    // last called middlewares #\n    let index = -1;\n\n    async function dispatch (i) {\n      if (i <= index) {\n        throw new Error('next() called multiple times');\n      }\n\n      index = i;\n      let fn = middlewares[i];\n      if (i === middlewares.length) {\n        fn = next;\n      }\n      if (!fn) {\n        return;\n      }\n\n      return await fn(context, () => dispatch(i + 1));\n    }\n\n    return dispatch(0);\n  };\n}\n\nxin.App = App;\n\nmodule.exports = App;\n\n\n\n/** WEBPACK FOOTER **\n ** ../xin/components/app.js\n **/"],"sourceRoot":""}
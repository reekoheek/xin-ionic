{"version":3,"sources":["webpack:///./~/xin/components/lib/route.js","webpack:///./css/ion-menu.css","webpack:///./~/css-loader/lib/css-base.js","webpack:///./~/style-loader/addStyles.js","webpack:///./css/ion-menu.css?92b6","webpack:///./ion-app.js","webpack:///./ion-menu.js","webpack:///./~/xin/components/app.js"],"names":["Route","routeRegExp","str","chunks","split","length","Error","tokens","re","replace","g","token","push","optRe","slice","RegExp","isStatic","pattern","match","constructor","route","callback","type","args","result","getExecutorFor","fragment","handler","reduce","name","index","IonApp","props","Object","assign","platform","String","value","platformMode","computed","listeners","ready","classList","add","hasMenu","_menu$","getElementsByTagName","openMenu","open","closeMenu","close","_computePlatformMode","_backButtonTapped","window","history","back","xin","define","IonMenu","Component","observer","template","attached","_attached","fire","isOpened","async","$$","style","transform","opacity","Promise","resolve","reject","once","remove","toggle","_typeChanged","setAttribute","App","docTitle","manual","Boolean","mode","rootUri","hash","hashRegexp","_hashRegexp","_hash","notFound","console","warn","_titleChanged","title","document","created","put","__appSignature","location","handlers","middlewares","__started","__starting","start","__middlewareChainRun","compose","__listenNavigation","info","is","__id","executed","__execute","event","on","evt","defaultPrevented","target","nodeName","preventDefault","state","url","getAttribute","pushState","innerHTML","href","started","getFragmentExecutors","executors","executor","getFragment","context","app","uri","willContinue","forEach","navigate","path","options","toString","origin","use","middleware","decodeURI","pathname","search","err","error","fn","TypeError","next","i","dispatch"],"mappings":"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;AACA,gBAAgB,mBAAmB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,sBAAsB;AACtC;AACA;AACA,kBAAkB,2BAA2B;AAC7C;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,eAAe,mBAAmB;AAClC;AACA;AACA;AACA;AACA,iBAAiB,2BAA2B;AAC5C;AACA;AACA,QAAQ,uBAAuB;AAC/B;AACA;AACA,GAAG;AACH;AACA,iBAAiB,uBAAuB;AACxC;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;;AAEA;AACA;AACA;AACA,eAAe,iBAAiB;AAChC;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA,gCAAgC,sBAAsB;AACtD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA,EAAE;AACF;AACA,EAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;;AAEA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uDAAuD;AACvD;;AAEA,6BAA6B,mBAAmB;;AAEhD;;AAEA;;AAEA;AACA;AACA;;;;;;;;ACrPA;;AAEA;AACA;AACA;AACA;AA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","file":"ion-app.js","sourcesContent":["class Route {\n  static routeRegExp (str) {\n    let chunks = str.split('[');\n\n    if (chunks.length > 2) {\n      throw new Error('Invalid use of optional params');\n    }\n\n    let tokens = [];\n    let re = chunks[0].replace(/{([^}]+)}/g, function (g, token) {\n      tokens.push(token);\n      return '([^/]+)';\n    }).replace(/\\//g, '\\\\/');\n\n    let optRe = '';\n\n    if (chunks[1]) {\n      optRe = '(?:' + chunks[1].slice(0, -1).replace(/{([^}]+)}/g, function (g, token) {\n        tokens.push(token);\n        return '([^/]+)';\n      }).replace(/\\//g, '\\\\/') + ')?';\n    }\n    return [ new RegExp('^' + re + optRe + '$'), tokens ];\n  }\n\n  static isStatic (pattern) {\n    return !pattern.match(/[[{]/);\n  }\n\n  constructor (route, callback) {\n    this.route = route;\n    this.callback = callback;\n\n    if (Route.isStatic(route)) {\n      this.type = 's';\n      this.pattern = null;\n      this.args = [];\n    } else {\n      let result = Route.routeRegExp(route);\n      this.type = 'v';\n      this.pattern = result[0];\n      this.args = result[1];\n    }\n  }\n\n  getExecutorFor (fragment) {\n    if (this.type === 's') {\n      if (fragment === this.route) {\n        return { handler: this, args: {} };\n      }\n    } else if (this.type === 'v') {\n      let result = fragment.match(this.pattern);\n      if (result) {\n        return {\n          handler: this,\n          args: this.args.reduce((args, name, index) => {\n            args[name] = result[index + 1];\n            return args;\n          }, {}),\n        };\n      }\n    }\n  }\n}\n\nexport default Route;\n\n\n\n// WEBPACK FOOTER //\n// ./~/xin/components/lib/route.js","exports = module.exports = require(\"./../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \"ion-menu ion-backdrop {\\n  transition: opacity .3s;\\n  will-change: opacity;\\n}\\n\\nion-menu .menu-inner {\\n  transition: transform .3s;\\n  -webkit-transform: translateX(-100%);\\n  transform: translateX(-100%);\\n  will-change: transform, -webkit-transform;\\n}\\n\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader!./css/ion-menu.css\n// module id = 21\n// module chunks = 0","/*\r\n\tMIT License http://www.opensource.org/licenses/mit-license.php\r\n\tAuthor Tobias Koppers @sokra\r\n*/\r\n// css base code, injected by the css-loader\r\nmodule.exports = function() {\r\n\tvar list = [];\r\n\r\n\t// return the list of modules as css string\r\n\tlist.toString = function toString() {\r\n\t\tvar result = [];\r\n\t\tfor(var i = 0; i < this.length; i++) {\r\n\t\t\tvar item = this[i];\r\n\t\t\tif(item[2]) {\r\n\t\t\t\tresult.push(\"@media \" + item[2] + \"{\" + item[1] + \"}\");\r\n\t\t\t} else {\r\n\t\t\t\tresult.push(item[1]);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn result.join(\"\");\r\n\t};\r\n\r\n\t// import a list of modules into the list\r\n\tlist.i = function(modules, mediaQuery) {\r\n\t\tif(typeof modules === \"string\")\r\n\t\t\tmodules = [[null, modules, \"\"]];\r\n\t\tvar alreadyImportedModules = {};\r\n\t\tfor(var i = 0; i < this.length; i++) {\r\n\t\t\tvar id = this[i][0];\r\n\t\t\tif(typeof id === \"number\")\r\n\t\t\t\talreadyImportedModules[id] = true;\r\n\t\t}\r\n\t\tfor(i = 0; i < modules.length; i++) {\r\n\t\t\tvar item = modules[i];\r\n\t\t\t// skip already imported module\r\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\r\n\t\t\t//  when a module is imported multiple times with different media queries.\r\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\r\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\r\n\t\t\t\tif(mediaQuery && !item[2]) {\r\n\t\t\t\t\titem[2] = mediaQuery;\r\n\t\t\t\t} else if(mediaQuery) {\r\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\r\n\t\t\t\t}\r\n\t\t\t\tlist.push(item);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\treturn list;\r\n};\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader/lib/css-base.js\n// module id = 22\n// module chunks = 0","/*\r\n\tMIT License http://www.opensource.org/licenses/mit-license.php\r\n\tAuthor Tobias Koppers @sokra\r\n*/\r\nvar stylesInDom = {},\r\n\tmemoize = function(fn) {\r\n\t\tvar memo;\r\n\t\treturn function () {\r\n\t\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\r\n\t\t\treturn memo;\r\n\t\t};\r\n\t},\r\n\tisOldIE = memoize(function() {\r\n\t\treturn /msie [6-9]\\b/.test(window.navigator.userAgent.toLowerCase());\r\n\t}),\r\n\tgetHeadElement = memoize(function () {\r\n\t\treturn document.head || document.getElementsByTagName(\"head\")[0];\r\n\t}),\r\n\tsingletonElement = null,\r\n\tsingletonCounter = 0,\r\n\tstyleElementsInsertedAtTop = [];\r\n\r\nmodule.exports = function(list, options) {\r\n\tif(typeof DEBUG !== \"undefined\" && DEBUG) {\r\n\t\tif(typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\r\n\t}\r\n\r\n\toptions = options || {};\r\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\r\n\t// tags it will allow on a page\r\n\tif (typeof options.singleton === \"undefined\") options.singleton = isOldIE();\r\n\r\n\t// By default, add <style> tags to the bottom of <head>.\r\n\tif (typeof options.insertAt === \"undefined\") options.insertAt = \"bottom\";\r\n\r\n\tvar styles = listToStyles(list);\r\n\taddStylesToDom(styles, options);\r\n\r\n\treturn function update(newList) {\r\n\t\tvar mayRemove = [];\r\n\t\tfor(var i = 0; i < styles.length; i++) {\r\n\t\t\tvar item = styles[i];\r\n\t\t\tvar domStyle = stylesInDom[item.id];\r\n\t\t\tdomStyle.refs--;\r\n\t\t\tmayRemove.push(domStyle);\r\n\t\t}\r\n\t\tif(newList) {\r\n\t\t\tvar newStyles = listToStyles(newList);\r\n\t\t\taddStylesToDom(newStyles, options);\r\n\t\t}\r\n\t\tfor(var i = 0; i < mayRemove.length; i++) {\r\n\t\t\tvar domStyle = mayRemove[i];\r\n\t\t\tif(domStyle.refs === 0) {\r\n\t\t\t\tfor(var j = 0; j < domStyle.parts.length; j++)\r\n\t\t\t\t\tdomStyle.parts[j]();\r\n\t\t\t\tdelete stylesInDom[domStyle.id];\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n}\r\n\r\nfunction addStylesToDom(styles, options) {\r\n\tfor(var i = 0; i < styles.length; i++) {\r\n\t\tvar item = styles[i];\r\n\t\tvar domStyle = stylesInDom[item.id];\r\n\t\tif(domStyle) {\r\n\t\t\tdomStyle.refs++;\r\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\r\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\r\n\t\t\t}\r\n\t\t\tfor(; j < item.parts.length; j++) {\r\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tvar parts = [];\r\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\r\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\r\n\t\t\t}\r\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction listToStyles(list) {\r\n\tvar styles = [];\r\n\tvar newStyles = {};\r\n\tfor(var i = 0; i < list.length; i++) {\r\n\t\tvar item = list[i];\r\n\t\tvar id = item[0];\r\n\t\tvar css = item[1];\r\n\t\tvar media = item[2];\r\n\t\tvar sourceMap = item[3];\r\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\r\n\t\tif(!newStyles[id])\r\n\t\t\tstyles.push(newStyles[id] = {id: id, parts: [part]});\r\n\t\telse\r\n\t\t\tnewStyles[id].parts.push(part);\r\n\t}\r\n\treturn styles;\r\n}\r\n\r\nfunction insertStyleElement(options, styleElement) {\r\n\tvar head = getHeadElement();\r\n\tvar lastStyleElementInsertedAtTop = styleElementsInsertedAtTop[styleElementsInsertedAtTop.length - 1];\r\n\tif (options.insertAt === \"top\") {\r\n\t\tif(!lastStyleElementInsertedAtTop) {\r\n\t\t\thead.insertBefore(styleElement, head.firstChild);\r\n\t\t} else if(lastStyleElementInsertedAtTop.nextSibling) {\r\n\t\t\thead.insertBefore(styleElement, lastStyleElementInsertedAtTop.nextSibling);\r\n\t\t} else {\r\n\t\t\thead.appendChild(styleElement);\r\n\t\t}\r\n\t\tstyleElementsInsertedAtTop.push(styleElement);\r\n\t} else if (options.insertAt === \"bottom\") {\r\n\t\thead.appendChild(styleElement);\r\n\t} else {\r\n\t\tthrow new Error(\"Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.\");\r\n\t}\r\n}\r\n\r\nfunction removeStyleElement(styleElement) {\r\n\tstyleElement.parentNode.removeChild(styleElement);\r\n\tvar idx = styleElementsInsertedAtTop.indexOf(styleElement);\r\n\tif(idx >= 0) {\r\n\t\tstyleElementsInsertedAtTop.splice(idx, 1);\r\n\t}\r\n}\r\n\r\nfunction createStyleElement(options) {\r\n\tvar styleElement = document.createElement(\"style\");\r\n\tstyleElement.type = \"text/css\";\r\n\tinsertStyleElement(options, styleElement);\r\n\treturn styleElement;\r\n}\r\n\r\nfunction createLinkElement(options) {\r\n\tvar linkElement = document.createElement(\"link\");\r\n\tlinkElement.rel = \"stylesheet\";\r\n\tinsertStyleElement(options, linkElement);\r\n\treturn linkElement;\r\n}\r\n\r\nfunction addStyle(obj, options) {\r\n\tvar styleElement, update, remove;\r\n\r\n\tif (options.singleton) {\r\n\t\tvar styleIndex = singletonCounter++;\r\n\t\tstyleElement = singletonElement || (singletonElement = createStyleElement(options));\r\n\t\tupdate = applyToSingletonTag.bind(null, styleElement, styleIndex, false);\r\n\t\tremove = applyToSingletonTag.bind(null, styleElement, styleIndex, true);\r\n\t} else if(obj.sourceMap &&\r\n\t\ttypeof URL === \"function\" &&\r\n\t\ttypeof URL.createObjectURL === \"function\" &&\r\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\r\n\t\ttypeof Blob === \"function\" &&\r\n\t\ttypeof btoa === \"function\") {\r\n\t\tstyleElement = createLinkElement(options);\r\n\t\tupdate = updateLink.bind(null, styleElement);\r\n\t\tremove = function() {\r\n\t\t\tremoveStyleElement(styleElement);\r\n\t\t\tif(styleElement.href)\r\n\t\t\t\tURL.revokeObjectURL(styleElement.href);\r\n\t\t};\r\n\t} else {\r\n\t\tstyleElement = createStyleElement(options);\r\n\t\tupdate = applyToTag.bind(null, styleElement);\r\n\t\tremove = function() {\r\n\t\t\tremoveStyleElement(styleElement);\r\n\t\t};\r\n\t}\r\n\r\n\tupdate(obj);\r\n\r\n\treturn function updateStyle(newObj) {\r\n\t\tif(newObj) {\r\n\t\t\tif(newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap)\r\n\t\t\t\treturn;\r\n\t\t\tupdate(obj = newObj);\r\n\t\t} else {\r\n\t\t\tremove();\r\n\t\t}\r\n\t};\r\n}\r\n\r\nvar replaceText = (function () {\r\n\tvar textStore = [];\r\n\r\n\treturn function (index, replacement) {\r\n\t\ttextStore[index] = replacement;\r\n\t\treturn textStore.filter(Boolean).join('\\n');\r\n\t};\r\n})();\r\n\r\nfunction applyToSingletonTag(styleElement, index, remove, obj) {\r\n\tvar css = remove ? \"\" : obj.css;\r\n\r\n\tif (styleElement.styleSheet) {\r\n\t\tstyleElement.styleSheet.cssText = replaceText(index, css);\r\n\t} else {\r\n\t\tvar cssNode = document.createTextNode(css);\r\n\t\tvar childNodes = styleElement.childNodes;\r\n\t\tif (childNodes[index]) styleElement.removeChild(childNodes[index]);\r\n\t\tif (childNodes.length) {\r\n\t\t\tstyleElement.insertBefore(cssNode, childNodes[index]);\r\n\t\t} else {\r\n\t\t\tstyleElement.appendChild(cssNode);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction applyToTag(styleElement, obj) {\r\n\tvar css = obj.css;\r\n\tvar media = obj.media;\r\n\r\n\tif(media) {\r\n\t\tstyleElement.setAttribute(\"media\", media)\r\n\t}\r\n\r\n\tif(styleElement.styleSheet) {\r\n\t\tstyleElement.styleSheet.cssText = css;\r\n\t} else {\r\n\t\twhile(styleElement.firstChild) {\r\n\t\t\tstyleElement.removeChild(styleElement.firstChild);\r\n\t\t}\r\n\t\tstyleElement.appendChild(document.createTextNode(css));\r\n\t}\r\n}\r\n\r\nfunction updateLink(linkElement, obj) {\r\n\tvar css = obj.css;\r\n\tvar sourceMap = obj.sourceMap;\r\n\r\n\tif(sourceMap) {\r\n\t\t// http://stackoverflow.com/a/26603875\r\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\r\n\t}\r\n\r\n\tvar blob = new Blob([css], { type: \"text/css\" });\r\n\r\n\tvar oldSrc = linkElement.href;\r\n\r\n\tlinkElement.href = URL.createObjectURL(blob);\r\n\r\n\tif(oldSrc)\r\n\t\tURL.revokeObjectURL(oldSrc);\r\n}\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/style-loader/addStyles.js\n// module id = 32\n// module chunks = 0","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!./../node_modules/css-loader/index.js!./ion-menu.css\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!./../node_modules/style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!./../node_modules/css-loader/index.js!./ion-menu.css\", function() {\n\t\t\tvar newContent = require(\"!!./../node_modules/css-loader/index.js!./ion-menu.css\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./css/ion-menu.css\n// module id = 33\n// module chunks = 0","import xin from 'xin';\nimport App from 'xin/components/app';\n\nimport './ion-menu';\n\nclass IonApp extends App {\n  get props () {\n    return Object.assign({}, super.props, {\n      platform: {\n        type: String,\n        value: 'android',\n      },\n      platformMode: {\n        type: String,\n        computed: '_computePlatformMode(platform)',\n      },\n    });\n  }\n\n  get listeners () {\n    return Object.assign({}, super.listeners, {\n      'backbutton': '_backButtonTapped',\n    });\n  }\n\n  // created () {\n  //   super.created();\n  //\n  //   this.style.height = `${window.innerHeight}px`;\n  // }\n\n  ready () {\n    super.ready();\n\n    this.classList.add(this.platformMode);\n  }\n\n  hasMenu () {\n    if ('_menu$' in this === false) {\n      this._menu$ = this.getElementsByTagName('ion-menu')[0];\n    }\n\n    return this._menu$;\n  }\n\n  async openMenu () {\n    if (!this.hasMenu()) {\n      return;\n    }\n\n    this._menu$.open();\n  }\n\n  async closeMenu () {\n    if (!this.hasMenu()) {\n      return;\n    }\n\n    this._menu$.close();\n  }\n\n  _computePlatformMode (platform) {\n    return platform === 'android' ? 'md' : platform;\n  }\n\n  _backButtonTapped () {\n    window.history.back();\n  }\n}\n\nxin.define('ion-app', IonApp);\n\nexport default IonApp;\n\n\n\n// WEBPACK FOOTER //\n// ./ion-app.js","import xin from 'xin';\n\nimport './css/ion-menu.css';\n\nclass IonMenu extends xin.Component {\n  get props () {\n    return {\n      type: {\n        type: String,\n        value: 'overlay',\n        observer: '_typeChanged',\n      },\n    };\n  }\n\n  get template () {\n    return `\n      <div class=\"menu-inner\"><slot></slot></div>\n      <ion-backdrop (click)=\"close\" role=\"presentation\" class=\"show-backdrop\"></ion-backdrop>\n    `;\n  }\n\n  attached () {\n    super.attached();\n\n    this._attached = true;\n    this.fire('-menu-attached');\n  }\n\n  open () {\n    this.isOpened = true;\n    this.classList.add('show-menu');\n    this.async(() => {\n      this.$$('.menu-inner').style.transform = 'translateX(0)';\n      this.$$('ion-backdrop').style.opacity = '0.6';\n    }, 1);\n  }\n\n  close () {\n    return new Promise((resolve, reject) => {\n      if (!this.isOpened) {\n        return resolve();\n      }\n\n      this.isOpened = false;\n\n      this.once('transitionend', '.menu-inner', () => {\n        this.async(() => {\n          this.classList.remove('show-menu');\n          resolve();\n        }, 1);\n      });\n\n      this.$$('.menu-inner').style.transform = '';\n      this.$$('ion-backdrop').style.opacity = '0.0';\n    });\n  }\n\n  toggle () {\n    if (this.isOpened) {\n      this.close();\n    } else {\n      this.open();\n    }\n  }\n\n  _typeChanged (type) {\n    this.setAttribute('type', type);\n  }\n}\n\nxin.define('ion-menu', IonMenu);\n\nexport default IonMenu;\n\n\n\n// WEBPACK FOOTER //\n// ./ion-menu.js","import xin from '../';\nimport event from '../event';\n\nimport Route from './lib/route';\n\nclass App extends xin.Component {\n  get props () {\n    return {\n      docTitle: {\n        type: String,\n        value: 'Application',\n        observer: '_titleChanged',\n      },\n\n      manual: {\n        type: Boolean,\n      },\n\n      mode: {\n        type: String,\n        value: 'hash',\n      },\n\n      rootUri: {\n        type: String,\n        value: '/',\n      },\n\n      hash: {\n        type: String,\n        value: '#!',\n      },\n    };\n  }\n\n  get hashRegexp () {\n    if (!this._hashRegexp || this._hash !== this.hash) {\n      this._hashRegexp = new RegExp(`${this.hash}(.*)$`);\n      this._hash = this.hash;\n    }\n\n    return this._hashRegexp;\n  }\n\n  notFound (fragment) {\n    console.warn(`Route not found: ${fragment}`);\n  }\n\n  _titleChanged (title) {\n    document.title = title;\n  }\n\n  created () {\n    xin.put('app', this);\n\n    this.__appSignature = true;\n    this.location = window.location;\n    this.history = window.history;\n\n    // default values\n    this.handlers = [];\n    this.middlewares = [];\n\n    this.__started = false;\n    this.__starting = false;\n  }\n\n  attached () {\n    if (!this.manual) {\n      this.async(() => {\n        this.start();\n      });\n    }\n  }\n\n  route (route, callback) {\n    this.handlers.push(new Route(route, callback));\n  }\n\n  async start () {\n    if (this.__started || this.__starting) {\n      return;\n    }\n\n    this.__middlewareChainRun = compose(this.middlewares);\n\n    this.__listenNavigation();\n\n    console.info(`Starting ${this.is}:${this.__id} ...`);\n\n    this.__starting = true;\n    let executed = await this.__execute();\n    this.__starting = false;\n\n    if (executed) {\n      console.info(`Started ${this.is}:${this.__id}`);\n\n      this.__started = true;\n\n      this.fire('started');\n    }\n  }\n\n  __listenNavigation () {\n    let callback = () => {\n      this.__execute();\n    };\n\n    if (this.mode === 'history') {\n      event(window).on('popstate', callback);\n      event(document).on('click', evt => {\n        if (!evt.defaultPrevented && evt.target.nodeName === 'A' && evt.target.target === '') {\n          evt.preventDefault();\n\n          let state = { url: evt.target.getAttribute('href') };\n          this.history.pushState(state, evt.target.innerHTML, evt.target.href);\n\n          callback();\n        }\n      });\n    } else {\n      event(window).on('hashchange', callback);\n    }\n  }\n\n  get started () {\n    return this.__started || false;\n  }\n\n  getFragmentExecutors (fragment) {\n    return this.handlers.reduce((executors, handler) => {\n      let executor = handler.getExecutorFor(fragment);\n      if (executor) executors.push(executor);\n      return executors;\n    }, []);\n  }\n\n  async __execute () {\n    let fragment = this.getFragment();\n    let context = { app: this, uri: fragment };\n\n    // run middleware chain then execute all executors\n    let willContinue = await this.__middlewareChainRun(context, () => {\n      let executors = this.getFragmentExecutors(context.uri);\n      if (executors.length === 0) {\n        this.notFound(fragment);\n        this.fire('route-not-found', fragment);\n        return;\n      }\n\n      executors.forEach(executor => {\n        executor.handler.callback(executor.args, context);\n      });\n    });\n\n    if (willContinue === false) {\n      return false;\n    }\n\n    this.fire('navigated', context);\n    return true;\n  }\n\n  navigate (path, options) {\n    path = path || '/';\n    options = options || {};\n\n    if (this.mode === 'history') {\n      let url = this.rootUri + path.toString().replace(/\\/$/, '').replace(/^\\//, '');\n      if (this.location.href.replace(this.location.origin, '') !== url) {\n        this.history[options.replace ? 'replaceState' : 'pushState']({}, document.title, url);\n        this.__execute();\n      }\n    } else {\n      this.location.hash = this.hash + path;\n    }\n    return this;\n  }\n\n  use (middleware) {\n    this.middlewares.push(middleware);\n  }\n\n  getFragment () {\n    try {\n      let fragment;\n      if (this.mode === 'history') {\n        fragment = decodeURI(this.location.pathname + this.location.search);\n        fragment = fragment.replace(/\\?(.*)$/, '');\n        fragment = this.rootUri === '/' ? fragment : fragment.replace(this.rootUri, '');\n      } else {\n        let match = this.location.href.match(this.hashRegexp);\n        fragment = match ? match[1] : '';\n      }\n\n      return '/' + fragment.toString().replace(/\\/$/, '').replace(/^\\//, '');\n    } catch (err) {\n      console.error('Fragment is not match any pattern, fallback to /');\n      return '/';\n    }\n  }\n\n  // $back (evt) {\n  //   evt.preventDefault();\n  //   this.history.back();\n  // }\n}\n\nxin.define('xin-app', App);\n\nfunction compose (middlewares) {\n  for (let fn of middlewares) {\n    if (typeof fn !== 'function') {\n      throw new TypeError('Middleware must be composed of functions!');\n    }\n  }\n\n  return async (context, next) => {\n    // last called middlewares #\n    let index = -1;\n\n    async function dispatch (i) {\n      if (i <= index) {\n        throw new Error('next() called multiple times');\n      }\n\n      index = i;\n      let fn = middlewares[i];\n      if (i === middlewares.length) {\n        fn = next;\n      }\n      if (!fn) {\n        return;\n      }\n\n      return await fn(context, () => dispatch(i + 1));\n    }\n\n    return dispatch(0);\n  };\n}\n\nexport default App;\n\n\n\n// WEBPACK FOOTER //\n// ./~/xin/components/app.js"],"sourceRoot":""}
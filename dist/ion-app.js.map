{"version":3,"sources":["webpack:///./ion-menu.js","webpack:///./~/xin/components/app.js","webpack:///./~/xin/components/lib/route.js","webpack:///./css/ion-menu.css","webpack:///./css/ion-menu.css?92b6","webpack:///./ion-app.js"],"names":["IonMenu","_attached","fire","isOpened","classList","add","async","$$","style","transform","opacity","Promise","resolve","reject","once","remove","close","open","type","setAttribute","String","value","observer","Component","define","App","fragment","console","warn","title","document","put","__appSignature","location","window","history","handlers","middlewares","__started","__starting","manual","start","route","callback","push","__middlewareChainRun","compose","__listenNavigation","info","is","__id","__execute","executed","mode","event","on","evt","defaultPrevented","target","nodeName","preventDefault","state","url","getAttribute","pushState","innerHTML","href","reduce","executors","handler","executor","getExecutorFor","getFragment","context","app","uri","getFragmentExecutors","length","notFound","forEach","args","willContinue","path","options","rootUri","toString","replace","origin","match","hashSeparator","middleware","decodeURI","pathname","search","err","error","docTitle","Boolean","RegExp","fn","TypeError","next","i","index","Error","dispatch","Route","str","chunks","split","tokens","re","g","token","optRe","slice","pattern","isStatic","result","routeRegExp","name","IonApp","platformMode","_menu$","getElementsByTagName","hasMenu","platform","back","Object","assign","computed"],"mappings":"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","file":"ion-app.js","sourcesContent":["import xin from 'xin';\n\nimport './css/ion-menu.css';\n\nclass IonMenu extends xin.Component {\n  get props () {\n    return {\n      type: {\n        type: String,\n        value: 'overlay',\n        observer: '_typeChanged',\n      },\n    };\n  }\n\n  get template () {\n    return `\n      <div class=\"menu-inner\"><slot></slot></div>\n      <ion-backdrop (click)=\"close\" role=\"presentation\" class=\"show-backdrop\"></ion-backdrop>\n    `;\n  }\n\n  attached () {\n    super.attached();\n\n    this._attached = true;\n    this.fire('-menu-attached');\n  }\n\n  open () {\n    this.isOpened = true;\n    this.classList.add('show-menu');\n    this.async(() => {\n      this.$$('.menu-inner').style.transform = 'translateX(0)';\n      this.$$('ion-backdrop').style.opacity = '0.6';\n    }, 1);\n  }\n\n  close () {\n    return new Promise((resolve, reject) => {\n      if (!this.isOpened) {\n        return resolve();\n      }\n\n      this.isOpened = false;\n\n      this.once('transitionend', '.menu-inner', () => {\n        this.async(() => {\n          this.classList.remove('show-menu');\n          resolve();\n        });\n      });\n\n      this.$$('.menu-inner').style.transform = '';\n      this.$$('ion-backdrop').style.opacity = '0.0';\n    });\n  }\n\n  toggle () {\n    if (this.isOpened) {\n      this.close();\n    } else {\n      this.open();\n    }\n  }\n\n  _typeChanged (type) {\n    this.setAttribute('type', type);\n  }\n}\n\nxin.define('ion-menu', IonMenu);\n\nexport default IonMenu;\n\n\n\n// WEBPACK FOOTER //\n// ./ion-menu.js","import xin from '../src';\nimport Route from './lib/route';\n\n// const NOOP = () => {};\n\nclass App extends xin.Component {\n  get props () {\n    return {\n      docTitle: {\n        type: String,\n        value: 'Application',\n        observer: '_titleChanged',\n      },\n\n      manual: {\n        type: Boolean,\n      },\n\n      mode: {\n        type: String,\n        value: 'hash',\n      },\n\n      rootUri: {\n        type: String,\n        value: '/',\n      },\n\n      hashSeparator: {\n        type: RegExp,\n        value: () => /#!(.*)$/,\n      },\n    };\n  }\n\n  notFound (fragment) {\n    console.warn(`Route not found: ${fragment}`);\n  }\n\n  _titleChanged (title) {\n    document.title = title;\n  }\n\n  created () {\n    xin.put('app', this);\n\n    // this.classList.add('xin-app');\n\n    this.__appSignature = true;\n    this.location = window.location;\n    this.history = window.history;\n\n    // default values\n    this.handlers = [];\n    this.middlewares = [];\n\n    // this.__awaitRouteCallback = NOOP;\n    this.__started = false;\n    this.__starting = false;\n  }\n\n  attached () {\n    if (!this.manual) {\n      this.async(() => {\n        // this.__availableUris = [].map.call(this.querySelectorAll('.xin-view'), el => el.uri);\n        this.start();\n      });\n    }\n  }\n\n  route (route, callback) {\n    this.handlers.push(new Route(route, callback));\n    // this.__awaitRouteCallback(this.getFragmentExecutors(this.getFragment()));\n  }\n\n  async start () {\n    if (this.__started || this.__starting) {\n      return;\n    }\n\n    this.__middlewareChainRun = compose(this.middlewares);\n\n    this.__listenNavigation();\n\n    console.info(`Starting ${this.is}:${this.__id} ...`);\n\n    this.__starting = true;\n    let executed = await this.__execute();\n    this.__starting = false;\n\n    if (executed) {\n      console.info(`Started ${this.is}:${this.__id}`);\n\n      this.__started = true;\n\n      this.fire('started');\n    }\n  }\n\n  __listenNavigation () {\n    let callback = () => {\n      this.__execute();\n    };\n\n    if (this.mode === 'history') {\n      xin.event(window).on('popstate', callback);\n      xin.event(document).on('click', evt => {\n        if (!evt.defaultPrevented && evt.target.nodeName === 'A' && evt.target.target === '') {\n          evt.preventDefault();\n\n          let state = { url: evt.target.getAttribute('href') };\n          this.history.pushState(state, evt.target.innerHTML, evt.target.href);\n\n          callback();\n        }\n      });\n    } else {\n      xin.event(window).on('hashchange', callback);\n    }\n  }\n\n  get started () {\n    return this.__started || false;\n  }\n\n  getFragmentExecutors (fragment) {\n    return this.handlers.reduce((executors, handler) => {\n      let executor = handler.getExecutorFor(fragment);\n      if (executor) executors.push(executor);\n      return executors;\n    }, []);\n  }\n\n  // __waitForRoute () {\n  //   return new Promise((resolve, reject) => {\n  //     this.__awaitRouteCallback = (executors) => {\n  //       if (executors.length === 0) {\n  //         return;\n  //       }\n  //\n  //       this.__awaitRouteCallback = NOOP;\n  //       resolve(executors);\n  //     };\n  //   });\n  // }\n\n  async __execute () {\n    let fragment = this.getFragment();\n    let context = { app: this, uri: fragment };\n\n    // run middleware chain then execute all executors\n    let willContinue = await this.__middlewareChainRun(context, () => {\n      let executors = this.getFragmentExecutors(context.uri);\n      if (executors.length === 0) {\n        this.notFound(fragment);\n        this.fire('route-not-found', fragment);\n        return;\n        // if (this.__availableUris.indexOf(fragment) === -1) {\n        // }\n        // executors = await this.__waitForRoute();\n      }\n\n      executors.forEach(executor => {\n        executor.handler.callback(executor.args, context);\n      });\n    });\n\n    if (willContinue === false) {\n      return false;\n    }\n\n    this.fire('navigated', context);\n    return true;\n  }\n\n  navigate (path, options) {\n    path = path || '/';\n    options = options || {};\n\n    if (this.mode === 'history') {\n      let url = this.rootUri + path.toString().replace(/\\/$/, '').replace(/^\\//, '');\n      if (this.location.href.replace(this.location.origin, '') !== url) {\n        this.history[options.replace ? 'replaceState' : 'pushState']({}, document.title, url);\n        this.__execute();\n      }\n    } else {\n      this.location.href.match(this.hashSeparator);\n      this.location.href = this.location.href.replace(this.hashSeparator, '') + this.hashSeparator + path;\n    }\n    return this;\n  }\n\n  use (middleware) {\n    this.middlewares.push(middleware);\n  }\n\n  getFragment () {\n    try {\n      let fragment;\n      if (this.mode === 'history') {\n        fragment = decodeURI(this.location.pathname + this.location.search);\n        fragment = fragment.replace(/\\?(.*)$/, '');\n        fragment = this.rootUri === '/' ? fragment : fragment.replace(this.rootUri, '');\n      } else {\n        let match = this.location.href.match(this.hashSeparator);\n        fragment = match ? match[1] : '';\n      }\n\n      return '/' + fragment.toString().replace(/\\/$/, '').replace(/^\\//, '');\n    } catch (err) {\n      console.error('Fragment is not match any pattern, fallback to /');\n      return '/';\n    }\n  }\n\n  // $back (evt) {\n  //   evt.preventDefault();\n  //   this.history.back();\n  // }\n}\n\nxin.define('xin-app', App);\n\nfunction compose (middlewares) {\n  for (let fn of middlewares) {\n    if (typeof fn !== 'function') {\n      throw new TypeError('Middleware must be composed of functions!');\n    }\n  }\n\n  return async (context, next) => {\n    // last called middlewares #\n    let index = -1;\n\n    async function dispatch (i) {\n      if (i <= index) {\n        throw new Error('next() called multiple times');\n      }\n\n      index = i;\n      let fn = middlewares[i];\n      if (i === middlewares.length) {\n        fn = next;\n      }\n      if (!fn) {\n        return;\n      }\n\n      return await fn(context, () => dispatch(i + 1));\n    }\n\n    return dispatch(0);\n  };\n}\n\n// xin.App = App;\nexport default App;\n\n\n\n// WEBPACK FOOTER //\n// ./~/xin/components/app.js","class Route {\n  static routeRegExp (str) {\n    let chunks = str.split('[');\n\n    if (chunks.length > 2) {\n      throw new Error('Invalid use of optional params');\n    }\n\n    let tokens = [];\n    let re = chunks[0].replace(/{([^}]+)}/g, function (g, token) {\n      tokens.push(token);\n      return '([^/]+)';\n    }).replace(/\\//g, '\\\\/');\n\n    let optRe = '';\n\n    if (chunks[1]) {\n      optRe = '(?:' + chunks[1].slice(0, -1).replace(/{([^}]+)}/g, function (g, token) {\n        tokens.push(token);\n        return '([^/]+)';\n      }).replace(/\\//g, '\\\\/') + ')?';\n    }\n    return [ new RegExp('^' + re + optRe + '$'), tokens ];\n  }\n\n  static isStatic (pattern) {\n    return !pattern.match(/[[{]/);\n  }\n\n  constructor (route, callback) {\n    this.route = route;\n    this.callback = callback;\n\n    if (Route.isStatic(route)) {\n      this.type = 's';\n      this.pattern = null;\n      this.args = [];\n    } else {\n      let result = Route.routeRegExp(route);\n      this.type = 'v';\n      this.pattern = result[0];\n      this.args = result[1];\n    }\n  }\n\n  getExecutorFor (fragment) {\n    if (this.type === 's') {\n      if (fragment === this.route) {\n        return { handler: this, args: {} };\n      }\n    } else if (this.type === 'v') {\n      let result = fragment.match(this.pattern);\n      if (result) {\n        return {\n          handler: this,\n          args: this.args.reduce((args, name, index) => {\n            args[name] = result[index + 1];\n            return args;\n          }, {}),\n        };\n      }\n    }\n  }\n}\n\nexport default Route;\n\n\n\n// WEBPACK FOOTER //\n// ./~/xin/components/lib/route.js","exports = module.exports = require(\"./../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \"ion-menu ion-backdrop {\\n  transition: opacity .3s;\\n  will-change: opacity;\\n}\\n\\nion-menu .menu-inner {\\n  transition: transform .3s;\\n  -webkit-transform: translateX(-100%);\\n  transform: translateX(-100%);\\n  will-change: transform, -webkit-transform;\\n}\\n\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader!./css/ion-menu.css\n// module id = 24\n// module chunks = 0","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!./../node_modules/css-loader/index.js!./ion-menu.css\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!./../node_modules/style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!./../node_modules/css-loader/index.js!./ion-menu.css\", function() {\n\t\t\tvar newContent = require(\"!!./../node_modules/css-loader/index.js!./ion-menu.css\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./css/ion-menu.css\n// module id = 26\n// module chunks = 0","import xin from 'xin';\nimport App from 'xin/components/app';\n\nimport './ion-menu';\n\nclass IonApp extends App {\n  get props () {\n    return Object.assign({}, super.props, {\n      platform: {\n        type: String,\n        value: 'android',\n      },\n      platformMode: {\n        type: String,\n        computed: '_computePlatformMode(platform)',\n      },\n    });\n  }\n\n  get listeners () {\n    return Object.assign({}, super.listeners, {\n      'backbutton': '_backButtonTapped',\n    });\n  }\n\n  // created () {\n  //   super.created();\n  //\n  //   this.style.height = `${window.innerHeight}px`;\n  // }\n\n  ready () {\n    super.ready();\n\n    this.classList.add(this.platformMode);\n  }\n\n  hasMenu () {\n    if ('_menu$' in this === false) {\n      this._menu$ = this.getElementsByTagName('ion-menu')[0];\n    }\n\n    return this._menu$;\n  }\n\n  async openMenu () {\n    if (!this.hasMenu()) {\n      return;\n    }\n\n    this._menu$.open();\n  }\n\n  async closeMenu () {\n    if (!this.hasMenu()) {\n      return;\n    }\n\n    this._menu$.close();\n  }\n\n  _computePlatformMode (platform) {\n    return platform === 'android' ? 'md' : platform;\n  }\n\n  _backButtonTapped () {\n    window.history.back();\n  }\n}\n\nxin.define('ion-app', IonApp);\n\nexport default IonApp;\n\n\n\n// WEBPACK FOOTER //\n// ./ion-app.js"],"sourceRoot":""}
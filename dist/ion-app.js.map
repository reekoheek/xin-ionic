{"version":3,"sources":["webpack:///./ion-app.js","webpack:///../xin/components/app.js"],"names":["IonApp","classList","add","platformMode","platform","window","history","back","props","type","String","value","computed","define","xin","require","App","title","document","__appSignature","location","handlers","middlewares","__started","addEventListener","evt","console","error","detail","hashSeparator","reHashSeparator","RegExp","start","pattern","match","str","chunks","split","length","Error","tokens","re","replace","g","token","push","optRe","slice","route","callback","routeHandler","args","__isStatic","result","__routeRegExp","__starting","async","__tryStart","check","then","executors","mode","checkAndExecute","bind","defaultPrevented","target","nodeName","preventDefault","pushState","url","getAttribute","innerHTML","href","info","__getId","fire","fragment","Promise","resolve","reject","getFragment","running","forEach","handler","name","index","err","executers","promise","middleware","apply","executer","uri","catch","stack","path","options","rootUri","toString","origin","decodeURI","pathname","search","observer","Component","module","exports"],"mappings":"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","file":"ion-app.js","sourcesContent":["import xin from 'xin';\nimport App from 'xin/components/app';\n\nclass IonApp extends App {\n  get props () {\n    let props = super.props;\n\n    props.platform = {\n      type: String,\n      value: 'android',\n    };\n\n    props.platformMode = {\n      type: String,\n      computed: '_computePlatformMode(platform)',\n    };\n\n    return props;\n  }\n\n  get listeners () {\n    return {\n      'backbutton': '_backButtonTapped',\n    };\n  }\n\n  ready () {\n    this.classList.add(this.platformMode);\n  }\n\n  _computePlatformMode (platform) {\n    return platform === 'android' ? 'md' : platform;\n  }\n\n  _backButtonTapped () {\n    window.history.back();\n  }\n}\n\nxin.define('ion-app', IonApp);\n\nexport default IonApp;\n\n\n\n/** WEBPACK FOOTER **\n ** ./ion-app.js\n **/","const xin = require('../src');\n\nclass App extends xin.Component {\n  get props () {\n    return {\n      title: {\n        type: String,\n        value: 'Application',\n        observer: '_titleChanged',\n      },\n\n      mode: {\n        type: String,\n        value: 'hash',\n      },\n\n      rootUri: {\n        type: String,\n        value: '/',\n      },\n\n      hashSeparator: {\n        type: String,\n        value: '#!',\n        observer: '_hashSeparatorChanged',\n      },\n    };\n  }\n\n  _titleChanged (title) {\n    document.title = title;\n  }\n\n  created () {\n    this.__appSignature = true;\n    this.location = window.location;\n    this.history = window.history;\n\n    // default values\n    this.handlers = [];\n    this.middlewares = [];\n\n    this.__started = false;\n\n    this.addEventListener('route-not-found', function (evt) {\n      console.error('Route not found: ' + evt.detail);\n    });\n\n    // var originalNotify = this.__notify;\n    // this.__notify = function (path, value, oldValue) {\n    //   originalNotify.apply(this, arguments);\n    //   if (path[0] === '$') {\n    //     this.fire('property-sync', {\n    //       property: path,\n    //       value: value,\n    //       oldValue: oldValue,\n    //     });\n    //   }\n    // };\n  }\n\n  _hashSeparatorChanged (hashSeparator) {\n    this.reHashSeparator = new RegExp(hashSeparator + '(.*)$');\n  }\n\n  attached () {\n    this.start();\n  }\n\n  __isStatic (pattern) {\n    return !pattern.match(/[[{]/);\n  }\n\n  __routeRegExp (str) {\n    var chunks = str.split('[');\n\n    if (chunks.length > 2) {\n      throw new Error('Invalid use of optional params');\n    }\n\n    var tokens = [];\n    var re = chunks[0].replace(/{([^}]+)}/g, function (g, token) {\n      tokens.push(token);\n      return '([^/]+)';\n    }).replace(/\\//g, '\\\\/');\n\n    var optRe = '';\n\n    if (chunks[1]) {\n      optRe = '(?:' + chunks[1].slice(0, -1).replace(/{([^}]+)}/g, function (g, token) {\n        tokens.push(token);\n        return '([^/]+)';\n      }).replace(/\\//g, '\\\\/') + ')?';\n    }\n    return [new RegExp('^' + re + optRe + '$'), tokens];\n  }\n\n  route (route, callback) {\n    var routeHandler = {\n      route: route,\n      type: 's',\n      pattern: null,\n      args: [],\n      callback: callback,\n    };\n\n    if (!this.__isStatic(route)) {\n      routeHandler.type = 'v';\n      var result = this.__routeRegExp(route);\n      routeHandler.pattern = result[0];\n      routeHandler.args = result[1];\n    }\n\n    this.handlers.push(routeHandler);\n\n    // when app already on starting state but not accomplished yet will try start when one handler pushed\n    if (this.__starting) {\n      this.__starting = false;\n      this.async(this.__tryStart);\n    }\n  }\n\n  start () {\n    this.__starting = true;\n    this.check().then(executors => {\n      if (executors.length > 0) {\n        this.__starting = false;\n        this.__tryStart();\n      }\n    });\n  }\n\n  __tryStart () {\n    if (this.mode === 'history') {\n      window.addEventListener('popstate', this.checkAndExecute.bind(this), false);\n      document.addEventListener('click', function (evt) {\n        if (!evt.defaultPrevented && evt.target.nodeName === 'A' && evt.target.target === '') {\n          evt.preventDefault();\n          this.history.pushState({\n            url: evt.target.getAttribute('href'),\n          }, evt.target.innerHTML, evt.target.href);\n          this.checkAndExecute();\n        }\n      }.bind(this));\n    } else {\n      window.addEventListener('hashchange', this.checkAndExecute.bind(this), false);\n    }\n\n    this.checkAndExecute()\n      .then(function () {\n        console.info('Started    ' + this.__getId());\n        this.fire('started');\n        this.__started = true;\n      }.bind(this));\n  }\n\n  isStarted () {\n    return this.__started || false;\n  }\n\n  check (fragment) {\n    return new Promise(function (resolve, reject) {\n      try {\n        fragment = fragment || this.getFragment();\n        var running = [];\n        this.handlers.forEach(function (handler) {\n          if (handler.type === 's') {\n            if (fragment === handler.route) {\n              running.push({\n                handler: handler,\n                args: {},\n              });\n              return;\n            }\n          } else if (handler.type === 'v') {\n            // matches is unused\n            // var matches = [];\n            var result = fragment.match(handler.pattern);\n            // if (result) {\n            //   matches = result.slice(1);\n            // }\n\n            if (result) {\n              var args = {};\n\n              handler.args.forEach(function (name, index) {\n                args[name] = result[index + 1];\n              });\n\n              running.push({\n                handler: handler,\n                args: args,\n              });\n            }\n          }\n        });\n\n        resolve(running);\n      } catch (err) {\n        reject(err);\n      }\n    }.bind(this));\n  }\n\n  checkAndExecute () {\n    var fragment = this.getFragment();\n\n    return this.check(fragment)\n      .then(function (executers) {\n        if (executers.length) {\n          var promise = Promise.resolve();\n          this.middlewares.forEach(function (middleware) {\n            promise = promise.then(function () {\n              return middleware.apply(this);\n            }.bind(this));\n          }.bind(this));\n\n          return promise.then(function () {\n            executers.forEach(function (executer) {\n              executer.handler.callback(executer.args);\n            });\n\n            this.fire('navigated', {uri: fragment});\n            return executers;\n          }.bind(this));\n        }\n\n        this.fire('route-not-found', fragment);\n        return [];\n      }.bind(this))\n      .catch(function (err) {\n        console.error('Uncaught checkAndExecute error, ' + err.stack);\n      });\n  }\n\n  navigate (path, options) {\n    path = path || '/';\n    options = options || {};\n\n    if (this.mode === 'history') {\n      var url = this.rootUri + path.toString().replace(/\\/$/, '').replace(/^\\//, '');\n      if (this.location.href.replace(this.location.origin, '') !== url) {\n        this.history[options.replace ? 'replaceState' : 'pushState']({}, document.title, url);\n        this.checkAndExecute();\n      }\n    } else {\n      this.location.href.match(this.reHashSeparator);\n      this.location.href = this.location.href.replace(this.reHashSeparator, '') + this.hashSeparator + path;\n    }\n    return this;\n  }\n\n  use (middleware) {\n    this.middlewares.push(middleware);\n  }\n\n  // REMOVED, you can use getFragment()\n  // getURI () {\n  //   if (this.mode === 'hash') {\n  //     return this.location.hash.replace(this.hashSeparator, '') || '/';\n  //   } else {\n  //     throw new Error('Unimplemented getURI from history mode');\n  //   }\n  // },\n\n  getFragment () {\n    var fragment;\n    if (this.mode === 'history') {\n      fragment = decodeURI(this.location.pathname + this.location.search);\n      fragment = fragment.replace(/\\?(.*)$/, '');\n      fragment = this.rootUri === '/' ? fragment : fragment.replace(this.rootUri, '');\n    } else {\n      var match = this.location.href.match(this.reHashSeparator);\n      fragment = match ? match[1] : '';\n    }\n\n    return '/' + fragment.toString().replace(/\\/$/, '').replace(/^\\//, '');\n  }\n\n  $back (evt) {\n    evt.preventDefault();\n    this.history.back();\n  }\n}\n\nxin.define('xin-app', App);\n\nxin.App = App;\n\nmodule.exports = App;\n\n\n\n/** WEBPACK FOOTER **\n ** ../xin/components/app.js\n **/"],"sourceRoot":""}